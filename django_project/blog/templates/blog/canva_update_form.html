{% block content %}
<div class="container">
    <h2>Update Canva</h2>
    
    <!-- Détails du Canva -->
    <div class="canva-details">
        <h3>{{ canva.title }}</h3>
        <p>Created by: <strong>{{ created_by }}</strong></p>
        <p>Date posted: {{ date_posted|date:"F d, Y" }}</p>
        <img class="rounded-circle" src="{{ creator_profile.image.url }}" alt="{{ created_by }}" style="width: 100px; height: 100px;">
    </div>
    
    <!-- Formulaire de mise à jour -->
    <form method="POST" id="update-form">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="hidden" id="pixel-data" name="pixel_data" value="[]">
        <button type="submit" class="btn btn-primary">Update</button>
    </form>
</div>

<script>
    const pixels = [...document.querySelectorAll('.pixel')].map(pixel => ({
        x: pixel.dataset.x,
        y: pixel.dataset.y,
        color: pixel.style.backgroundColor || "#FFFFFF"
    }));
    document.getElementById('pixel-data').value = JSON.stringify(pixels);
</script>
{% endblock %}
